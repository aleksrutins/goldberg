module com.farthergate.goldberg.presets.Files
import "../Config.pkl"

function copy(source: String, dest: String) = new Config.Preset {
  name = "copy"
  defaultSteps {
    new {
      name = "copy:" + source
      commands {
        new { "cp"; "-r"; source + "/."; dest + "/" }
      }
    }
  }
}

function copyMap(files: Mapping<String, String>) = new Config.Preset {
  name = "copy"
  defaultSteps {
    new {
      name = "copy"
      commands {
        for (source, dest in files) {
          new { "cp"; source; dest }
        }
      }
    }
  }
}
